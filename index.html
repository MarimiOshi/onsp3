<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ONSP Project</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/placeholder.png">
</head>
<body>

    <main id="appContainer" class="app-main-content">

        <!-- しこしこモード セクション -->
        <section id="shikoshikoModeSection" class="mode-section active">
            <div class="shikoshiko-layout-container">
                <div class="shikoshiko-box1">
                    <div class="member-image-container main-image-area" id="shikoshikoMemberImageContainer">
                        <img id="shikoshikoMemberImage" src="images/placeholder.png" alt="メンバー画像">
                    </div>
                    <div class="side-info-panel left-panel">
                        <div class="profile-icon-wrapper">
                            <img id="shikoshikoMemberProfileIcon" src="images/placeholder.png" alt="Member Icon" class="profile-icon">
                        </div>
                        <button class="action-icon-button weak-point-button" id="shikoshikoWeakPointButton" title="弱点登録/解除" data-relpath="">
                            <span class="icon-display">☆</span>
                        </button>
                    </div>
                    <button class="settings-button-右上" id="openShikoshikoSettingsModal">⚙️</button>
                </div>

                <div class="serif-animation-container">
                    <div class="serif-area">
                        <div class="image-tags-container" id="shikoshikoImageTagsContainer" style="display: none;"></div>
                        <p id="shikoshikoMemberQuote" class="member-quote">ここにセリフが表示されます</p>
                    </div>
                    <div class="animation-area" id="shikoAnimationContainer">
                        <img src="images/sao.png" alt="竿" id="saoImage" class="sao-image">
                        <img src="images/shikoshiko_anim.png" alt="しこしこ" id="shikoshikoAnimationImage" class="shikoshiko-image">
                    </div>
                </div>

                <div class="shikoshiko-box2-controls-only">
                    <div class="main-controls" id="shikoshikoControlsArea">
                        <button id="shikoshikoSkipButton" class="control-button skip-button">スキップ</button>
                        <button id="shikoshikoStartButton" class="control-button pause-resume-button">一時停止</button>
                        <button id="shikoshikoAutoPlayButton" class="control-button autoplay-button">再生</button> <!-- ★ 追加 ★ -->
                        <button id="shikoshikoFinishButton" class="control-button finish-button">フィニッシュ</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- カウンターセクション -->
        <section id="counterSection" class="mode-section standard-mode-layout" style="display:none;">
            <h2>回数カウンター</h2>
            <p class="counter-instruction">画像をクリックするとカウントが増えます。</p>
            <div class="counter-controls">
                <button id="decreaseModeButton" class="counter-mode-button">減らすモード OFF</button>
            </div>
            <div class="counter-grid" id="counterGrid">
                <p class="loading-message">カウンター読み込み中...</p>
            </div>
        </section>

    </main>

    <!-- しこしこモード設定モーダル -->
    <div id="shikoshikoSettingsModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="modal-close-button" id="closeShikoshikoSettingsModal">×</span>
            <h2>しこしこ設定</h2>
            <div class="modal-body">
                <div class="setting-group">
                    <h4>メンバー出現率</h4>
                    <div class="slider-container member-sliders" id="modalShikoshikoMemberSliders"><p>読み込み中...</p></div>
                    <p class="selection-note">数値が高いほど出やすくなります (0は出ません)</p>
                </div>
                <div class="setting-group">
                    <h4>BPM設定</h4>
                    <div class="bpm-setting">
                        <label for="modalFixedBpmInput">BPM:</label>
                        <input type="number" id="modalFixedBpmInput" min="30" max="300" value="120">
                    </div>
                </div>
                 <div class="setting-group">
                    <h4>自動スキップ間隔 (ミリ秒)</h4>
                    <div class="autoplay-interval-setting">
                        <label for="modalAutoplayIntervalInput">間隔:</label>
                        <input type="number" id="modalAutoplayIntervalInput" min="1000" max="30000" step="1000" value="5000">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveShikoshikoSettingsButton" class="action-button primary">設定を保存</button>
            </div>
        </div>
    </div>

    <!-- グローバルな下部タブナビゲーション -->
    <nav id="tabNavigation" class="tab-navigation-global-footer">
        <button class="tab-button active" data-tab-target="#shikoshikoModeSection">しこしこ</button>
        <button class="tab-button" data-tab-target="#counterSection">カウンター</button>
    </nav>

    <script src="config.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/services/storage.js"></script>
    <script src="js/ui/dom_utils.js"></script>
    <script src="js/ui/components.js"></script>
    <script src="js/modes/shikoshiko.js"></script>
    <script src="js/modes/counter.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
