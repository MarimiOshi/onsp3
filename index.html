<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ONSP Project</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="images/placeholder.png">
</head>
<body>

    <main id="appContainer" class="app-main-content">

        <!-- しこしこモード セクション -->
        <section id="shikoshikoModeSection" class="mode-section active">
            <div class="shikoshiko-layout-container">

                <!-- BOX1: 上部メインエリア (画像、サイド情報、設定ボタン) -->
                <div class="shikoshiko-box1">
                    <div class="member-image-container main-image-area" id="shikoshikoMemberImageContainer">
                        <img id="shikoshikoMemberImage" src="images/placeholder.png" alt="メンバー画像">
                        <!-- 貼り付けられたステッカーはここにJSで追加 -->
                    </div>

                    <!-- 左サイド情報パネル (TikTok風アイコンなど) -->
                    <div class="side-info-panel left-panel">
                        <div class="profile-icon-wrapper">
                            <img id="shikoshikoMemberProfileIcon" src="images/placeholder.png" alt="Member Icon" class="profile-icon">
                        </div>
                        <button class="action-icon-button weak-point-button" id="shikoshikoWeakPointButton" title="弱点登録/解除" data-relpath="">
                            <span class="icon-display">☆</span> <!-- ☆ or ★ -->
                            <!-- <span class="count-display" id="shikoshikoWeakPointCount"></span> -->
                        </button>
                        <!-- 他のアイコンボタンが必要ならここに追加 -->
                    </div>

                    <!-- 右上設定ボタン -->
                    <button class="settings-button-右上" id="openShikoshikoSettingsModal">⚙️</button>
                </div>

                <!-- セリフとアニメーションのコンテナ -->
                <div class="serif-animation-container">
                    <div class="serif-area">
                        <div class="image-tags-container" id="shikoshikoImageTagsContainer" style="display: none;">
                            <!-- JSで画像タグを生成 -->
                        </div>
                        <p id="shikoshikoMemberQuote" class="member-quote">ここにセリフが表示されます</p>
                    </div>
                    <div class="animation-area" id="shikoAnimationContainer">
                        <img src="images/sao.png" alt="竿" id="saoImage" class="sao-image">
                        <img src="images/shikoshiko_anim.png" alt="しこしこ" id="shikoshikoAnimationImage" class="shikoshiko-image">
                    </div>
                </div>

                <!-- BOX2: 下部コントロールエリア (ボタン、タブナビ) -->
                <div class="shikoshiko-box2">
                    <div class="main-controls" id="shikoshikoControlsArea">
                        <button id="shikoshikoSkipButton" class="control-button skip-button" style="display: none;">スキップ</button>
                        <button id="shikoshikoStartButton" class="control-button start-finish-button">開始</button>
                        <button id="shikoshikoFinishButton" class="control-button start-finish-button" style="display: none;">フィニッシュ</button>
                    </div>
                    <nav id="tabNavigation" class="tab-navigation-area">
                        <button class="tab-button active" data-tab-target="#shikoshikoModeSection">しこしこ</button>
                        <button class="tab-button" data-tab-target="#counterSection">カウンター</button>
                        <button class="tab-button" data-tab-target="#gallerySection">ギャラリー</button>
                    </nav>
                </div>

            </div>
        </section>

        <!-- カウンターセクション (変更なし) -->
        <section id="counterSection" class="mode-section" style="display:none;">
            <div class="mode-content-wrapper">
                <h2>回数カウンター</h2>
                <p class="counter-instruction">画像をクリックするとカウントが増えます。</p>
                <div class="counter-controls">
                    <button id="decreaseModeButton" class="counter-mode-button">減らすモード OFF</button>
                </div>
                <div class="counter-grid" id="counterGrid">
                    <p class="loading-message">カウンター読み込み中...</p>
                </div>
            </div>
        </section>

        <!-- ギャラリーセクション (変更なし) -->
        <section id="gallerySection" class="mode-section" style="display:none;">
            <div class="mode-content-wrapper">
                <h2>ギャラリー</h2>
                <div class="gallery-controls">
                    <label for="galleryMemberFilter">メンバー:</label>
                    <select id="galleryMemberFilter"> <option value="all">全員</option> </select>
                    <label for="galleryTypeFilter">タイプ:</label>
                    <select id="galleryTypeFilter"> <option value="all">すべて</option> <option value="ero">EROのみ</option> <option value="hutuu">通常のみ</option> </select>
                    <div class="gallery-toggle-weak">
                        <input type="checkbox" id="galleryWeakPointFilter">
                        <label for="galleryWeakPointFilter">弱点画像のみ表示</label>
                    </div>
                    <button id="galleryRefreshButton" class="action-button small">更新</button>
                </div>
                <div id="galleryGrid" class="gallery-grid">
                    <p class="loading-message gallery-loading">ギャラリーを読み込み中...</p>
                </div>
            </div>
        </section>

    </main>

    <!-- しこしこモード設定モーダル (変更なし) -->
    <div id="shikoshikoSettingsModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span class="modal-close-button" id="closeShikoshikoSettingsModal">×</span>
            <h2>しこしこ設定</h2>
            <div class="modal-body">
                <div class="setting-group">
                    <h4>メンバー出現率</h4>
                    <div class="slider-container member-sliders" id="modalShikoshikoMemberSliders">
                        <p>メンバー読み込み中...</p>
                    </div>
                    <p class="selection-note">数値が高いほど出やすくなります (0は出ません)</p>
                </div>
                <div class="setting-group">
                    <h4>背景エフェクト</h4>
                    <div class="effect-slider-item">
                        <label for="modalPulseBrightnessSlider">明るさ:</label>
                        <input type="range" id="modalPulseBrightnessSlider" min="0" max="5" step="1" value="3">
                        <span class="slider-value" id="modalPulseBrightnessValue">3</span>
                    </div>
                </div>
                <div class="setting-group">
                    <h4>BPM設定</h4>
                    <div class="bpm-setting">
                        <label for="modalFixedBpmInput">BPM:</label>
                        <input type="number" id="modalFixedBpmInput" min="30" max="300" value="120">
                    </div>
                </div>
                <div class="setting-group" id="modalStickerSettingsGroup" style="display:none;">
                    <h4>ステッカー</h4>
                    <div id="modalStickerChoiceContainer" class="sticker-choice-container modal-sticker-choices">
                        <p class="sticker-loading">ステッカー読込中...</p>
                    </div>
                    <button id="modalClearAllStickersButton" class="action-button small secondary">現在の画像の全ステッカー削除</button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveShikoshikoSettingsButton" class="action-button primary">保存して閉じる</button>
            </div>
        </div>
    </div>

    <!-- JavaScriptファイル読み込み -->
    <script src="config.js"></script>
    <script src="js/utils/helpers.js"></script>
    <script src="js/services/storage.js"></script>
    <script src="js/ui/dom_utils.js"></script>
    <script src="js/ui/components.js"></script>
    <script src="js/modes/shikoshiko.js"></script>
    <script src="js/modes/counter.js"></script>
    <script src="js/modes/gallery.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
